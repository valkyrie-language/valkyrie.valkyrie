# 增强多文件分析测试 - 主文件
# 测试跨文件符号解析、依赖管理和循环依赖检测

namespace! main;

using math::calculator;
using utils::logger;
using data::processor;

# 测试跨文件函数调用
micro testCalculations() {
    let result1 = add(10, 20);
    let result2 = multiply(5, 6);
    let result3 = divide(100, 4);
    
    log("Calculation results:");
    log("10 + 20 = " + result1);
    log("5 * 6 = " + result2);
    log("100 / 4 = " + result3);
    
    return result1 + result2 + result3;
}

# 测试跨文件类使用
micro testDataProcessing() {
    let processor = DataProcessor();
    processor.addData(42);
    processor.addData(84);
    processor.addData(126);
    
    let average = processor.getAverage();
    log("Average of data: " + average);
    
    return average;
}

# 测试复杂的跨文件依赖
micro runComplexTest() {
    log("Starting enhanced multifile test...");
    
    let calcResult = testCalculations();
    let dataResult = testDataProcessing();
    
    let finalResult = calcResult + dataResult;
    log("Final combined result: " + finalResult);
    
    return finalResult;
}

# 主执行入口
let testResult = runComplexTest();
console.log("Enhanced multifile test completed with result: " + testResult);